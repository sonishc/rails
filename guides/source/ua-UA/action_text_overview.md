**НЕ ЧИТАЙТЕ ЦЕЙ ФАЙЛИ НА GITHUB, ПОСІБНИК ОПУБЛІКОВАНИЙ НА https://guides.rubyonrails.org.**

# Огляд Action Text

У цьому посібнику ви знайдете все необхідне, щоб розпочати роботу з
форматування текстового контенту.

Прочитавши цей посібник, ви будете знати:

- Як налаштувати Action Text.
- Як обробляти форматований текстовий контент.
- Як стилізувати форматований текстовий контент.

---

## Вступ

Action Text приносить для Rails форматований текстовий контент та можливість його редагування.
Що включає в себе [Trix редактор](https://trix-editor.org) що обробляє все, від форматування
до посилань, цитат, списків, вбудованих зображень та галерей.
Відформатований текстовий контент генерується за допомогою Trix редактора і збереігається у
власній RichText моделі вона є пов'язаною з будь-якою існуючою моделлю Active Record в аплікації.
Будь які вбудовані зображення (або по іншому прикріплення накштал файлу) автоматично збережуться
з використанням Active Storage та взаємодіючою моделлю RichText.

## Trix в порівнянні з іншими редакторами текстового контенту

Більшість візуальних редакторів(WYSIWYG) є обгорткою довкола HTML’s `contenteditable` та `execCommand` APIs,
спроектовані корпорацією Microsoft для підтримки редагування веб сотрінок в Internet Explorer 5.5 в реальному часі,
що врешті-решт було [обернено-розроблено](https://blog.whatwg.org/the-road-to-html-5-contenteditable#history)
та скопійовано іншими переглядачами(браузерами).

Оскільки ці APIs ніколи не були повністю уточнені або задокументовані,
а також оскільки візуальні редактори(WYSIWYG) HTML мають величезний обсяг, кожна
реалізація браузера має власний набір помилок та причудів,
і розробникам JavaScript залишається вирішити невідповідності.

Trix уникає цих невідповідностей, трактуючи вміст
як пристрій вводу / виводу: коли відбувається ввід до редактора,
Trix конвертує цей ввід в операцію редагування на внутрішній моделі документа,
а потім повторно передає цей документ у редактор. Це дає Trix повний контроль над тим,
що відбувається після кожного натискання клавіш,
і дозволяє уникнути необхідності використовувати execCommand.

## Встановлення

Запустіть `rails action_text:install` щоб додати Yarn пакет і скопіювати необхідну міграцію.
Також, вам необхідно налаштувати Active Storage для вбудованих зображень та інших прикріплених файлів.
Будь ласка, зверніться до посібника [Огляд Active Storage](active_storage_overview.html).

## Приклад

Додаємо поле текстовий контент до існуючої моделі:

```ruby
# app/models/message.rb
class Message < ApplicationRecord
  has_rich_text :content
end
```

Потім звертаємося до цього поля у формі для цієї моделі:

```erb
<%# app/views/messages/_form.html.erb %>
<%= form_with model: message do |form| %>
  <div class="field">
    <%= form.label :content %>
    <%= form.rich_text_area :content %>
  </div>
<% end %>
```

І, відобразимо оброблений текстовий контент на сторінці:

```erb
<%= @message.content %>
```

Щоб погодити використання обробленого текстового контенту, все, що необхідно зробити,
це дозволити посилаєтися на цей атрибут:

```ruby
class MessagesController < ApplicationController
  def create
    message = Message.create! params.require(:message).permit(:title, :content)
    redirect_to message
  end
end
```

## Спеціальні стилі

За замовчуванням, редактор Action Text та вміст стилізуються відповідно до Trix.
Якщо ви хочете змінити ці налаштування за замовчуванням, їх потрібно буде видалити
`app/assets/stylesheets/actiontext.scss` лінкер і базувати свої стилі в
[даному файлі](https://raw.githubusercontent.com/basecamp/trix/master/dist/trix.css).

Ви також можете стилізувати HTML, який використовується для вбудованих зображень та інших
вкладених файлів (відомих як краплі). Встановлюючи, Action Text буде скопійовано частину до
`app/views/active_storage/blobs/_blob.html.erb`, який ви можете спеціалізувати.
